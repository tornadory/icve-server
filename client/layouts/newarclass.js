import './NewArclass.html';
import {Session} from 'meteor/session';

// AutoForm.setDefaultTemplate('materialize');

AutoForm.addHooks('insertArclass', {
  onSuccess: function(){
    console.log('running after insert ...');
    FlowRouter.go('/');
  }
});

// Template.registerHelper("typeOptions", function() {
//     return [
//         {label: "2013", value: 2013},
//         {label: "2014", value: 2014},
//         {label: "2015", value: 2015}
//     ];
// });

Template.NewArclass.helpers({
  arclasses(){
    return ARClasses.find();
  },
  images(){
    return Images.find({});
  },
  newURL(){
    return FlowRouter.getParam('url');
    //return "testURL";
  },
  defaultValues(){
    return {
      //url: Session.get('url')
      url: atob(FlowRouter.getParam('url')),
      //url: FlowRouter.getParam('url'),
      // subject.options: function(){
      //   return [{label: "2013", value: 2013},{label: "2014", value: 2014},{label: "2015", value: 2015}];
      // }
    };
  },
  // typeOptions(){
  //   // return [
  //   //     {label: "2013", value: 2013},
  //   //     {label: "2014", value: 2014},
  //   //     {label: "2015", value: 2015}
  //   // ];
  //   // return {
  //   //     sid1: "机械制造与自动化",
  //   //     sid2: "物联网应用技术",
  //   //     sid3: "机电一体化",
  //   //     sid4: "工业机器人技术",
  //   //     sid5: "计算机应用技术",
  //   //     sid6: "航空工程技术"
  //   // };
  //   // console.log(Subjects.find({}));
  //   // return Subjects.find({}).map(function(c){
  //   //   // console.log(c); //OK
  //   //   return {label: c.name, value: c._id};
  //   // });
  // }
});

// Template.NewArclass.newURL = function(){
//   return "testURL";
// }
